name: Fetch Official pcb2gcode v2.4

on: 
  workflow_dispatch:

jobs:
  get-release:
    runs-on: windows-latest
    steps:
      - name: Download v2.4 Release
        shell: pwsh
        run: |
          # Download der offiziellen Windows-Version mit dem korrigierten Link
          $url = "https://github.com/pcb2gcode/pcb2gcode/releases/download/v2.4.0/pcb2gcode-windows-2.4.0.zip"
          Invoke-WebRequest -Uri $url -OutFile "pcb2gcode.zip"
          
      - name: Extract and Prepare
        shell: pwsh
        run: |
          Expand-Archive -Path "pcb2gcode.zip" -DestinationPath "temp_extract"
          mkdir dist
          # Wir kopieren den Inhalt des entpackten Ordners (EXE und DLLs) in dist
          Copy-Item -Path "temp_extract\*" -Destination "dist" -Recurse -Force
          
      - name: Upload Artifact
        uses: actions/upload-artifact@v4
        with:
          name: pcb2gcode-v2.4-official
          path: dist/