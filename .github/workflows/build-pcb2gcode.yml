name: Fetch Official pcb2gcode v2.4

on: 
  workflow_dispatch:

jobs:
  get-release:
    runs-on: windows-latest
    steps:
      - name: Download v2.4 Release
        shell: pwsh
        run: |
          # Download der offiziellen Windows-Version
          Invoke-WebRequest -Uri "https://github.com/pcb2gcode/pcb2gcode/releases/download/v2.4.0/pcb2gcode-2.4.0-win64.zip" -OutFile "pcb2gcode.zip"
          
      - name: Extract and Prepare
        shell: pwsh
        run: |
          Expand-Archive -Path "pcb2gcode.zip" -DestinationPath "temp_extract"
          mkdir dist
          # Wir verschieben nur den Inhalt des extrahierten Ordners in dist
          Get-ChildItem -Path "temp_extract\*" -Recurse | Copy-Item -Destination "dist" -Force
          
      - name: Upload Artifact
        uses: actions/upload-artifact@v4
        with:
          name: pcb2gcode-v2.4-official
          path: dist/